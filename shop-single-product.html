<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="msapplication-TileColor" content="#0E0E0E">
  <meta name="template-color" content="#0E0E0E">
  <meta name="description" content="Index page">
  <meta name="keywords" content="index, page">
  <meta name="author" content="">
  <link rel="shortcut icon" type="image/x-icon" href="assets/imgs/template/favicon.svg">
  <link href="assets/css/style.css?v=3.0.0" rel="stylesheet">
  <title>Home - ibest</title>
</head>

<body>
  <div id="preloader-active">
    <div class="preloader d-flex align-items-center justify-content-center">
      <div class="preloader-inner position-relative">
        <div class="text-center"><img class="mb-10" src="assets/imgs/template/favicon.svg" alt="ibest">
          <div class="preloader-dots"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="topbar top-brand-2">
    <div class="container-topbar">
      <div class="menu-topbar-left d-none d-xl-block">
        <ul class="nav-small">
          <li><a class="font-xs" href="index.html">Home</a></li>
          <li><a class="font-xs" href="shop-grid.html">New Arrival</a></li>
          <li><a class="font-xs" href="page-contact.html">Contact</a></li>
        </ul>
      </div>
      <div class="info-topbar text-center d-none d-xl-block"><span id="infoTopbar1"
        class="font-xs color-brand-3"></span><span id="infoTopbar2" class="font-sm-bold color-success"></span></div>
      <div class="menu-topbar-right">
        <div class="dropdown dropdown-language">
          <button class="btn dropdown-toggle" id="dropdownPage" type="button" data-bs-toggle="dropdown"
            aria-expanded="true" data-bs-display="static"><span class=" font-xs color-brand-3"><img
                src="assets/imgs/template/en.svg" alt="ibest"> English </span></button>
        </div>
        <div class="dropdown dropdown-language">
        </div>
      </div>
    </div>
  </div>
  <header class="header header-container sticky-bar">
    <div class="container">
      <div class="main-header">
        <div class="header-left">
          <div class="header-logo">
            <a href="index.html">
              <img alt="ibest" src="assets/imgs/template/logo.svg">
            </a>
          </div>
          <div class="header-search">
            <div class="box-header-search">
              <div class="form-search">
                <div class="box-category">
                  <select class="select-active select2-hidden-accessible" data-select2-id="1" tabindex="-1"
                    aria-hidden="true">
                    <option value="All">All categories</option>
                    <!--All categories will show here-->
                  </select>
                </div>
                <div class="box-keysearch">
                  <input class="form-control font-xs" type="text" value="" placeholder="Search for items">
                </div>
              </div>
            </div>
          </div>
          <div class="header-nav text-start">
          </div>
          <div class="header-shop">
            <div class="d-inline-block box-dropdown-cart"><span class="font-lg icon-list icon-account"
                id="accountIcon"><span>Account</span></span>
              <div class="dropdown-account">
                <ul>
                  <li><a href="page-account.html">My Account</a></li>
                  <li><a href="page-account.html">My Orders</a></li>
                  <li><a href="shop-wishlist.html">My Wishlist</a></li>
                  <li><a href="page-account.html">Setting</a></li>
                  <li id="signinLink"><a href="#" onclick="signInOrOut()"></a></li>
                </ul>
              </div>
            </div><a class="font-lg icon-list icon-wishlist" id="wishlistIcon"><span>Wishlist</span><span
                class="number-item font-xs" id="wishlistCount">0</span></a>
            <a class="d-inline-block box-dropdown-cart" id="cartIcon">
              <span class="font-lg icon-list icon-cart">
                <span>Cart</span>
                <span class="number-item font-xs" id="cartCount">0</span>
              </span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="header-bottom">
      <div class="container">
        <div class="dropdown d-inline-block">
          <button class="btn dropdown-toggle btn-category" id="dropdownCategory" type="button" data-bs-toggle="dropdown"
            aria-expanded="true" data-bs-display="static"><span class="dropdown-right font-sm-bold color-white">Shop By
              Categories</span></button>
          <div class="sidebar-left dropdown-menu dropdown-menu-light" aria-labelledby="dropdownCategory"
            data-bs-popper="static">
            <ul class="menu-texts menu-close">
              <!--Catgories and Sub-categories will show here-->
            </ul>
          </div>
        </div>
        <div class="mobile-keysearch">
          <input id="searchInput" class="form-control font-xs" type="text" value="" placeholder="Search">
        </div>
        <div class="mobile-icons">
          <div class="mobile-icon dropdown">
            <a href="#" class="mobile-icon-link"><img src="assets/imgs/template/account.svg" alt="Account Icon"
                id="accountIconMobile"></a>
            <div class="dropdown-content">
              <ul>
                <li><a href="page-account.html">My Account</a></li>
                <li><a href="page-account.html">My Orders</a></li>
                <li><a href="shop-wishlist.html">My Wishlist</a></li>
                <li><a href="page-account.html">Setting</a></li>
                <li id="signinLinkMobile"><a href="#" onclick="signInOrOut()"></a></li>
              </ul>
            </div>
          </div>
          <a href="shop-wishlist.html" class="mobile-icon-link"><img src="assets/imgs/template/wishlist.svg"
              alt="Wishlist Icon"><span class="badge top-right" id="wishlistCountMobile">0</span></a>
          <a href="shop-cart.html" class="mobile-icon-link"><img src="assets/imgs/template/cart.svg"
              alt="Cart Icon"><span class="badge top-right" id="cartCountMobile">0</span></a>
        </div>

      </div>
    </div>
  </header>

  <nav class="bottom-nav">
    <a href="index.html" class="nav-link" id="home">
      <img src="assets/imgs/bottomBar/home-selected.svg" class="selected-icon" alt="Home Selected Icon">
      <img src="assets/imgs/bottomBar/home.svg" class="unselected-icon" alt="Home Unselected Icon">
      <span>Home</span>
    </a>
    <a href="shop-cart.html" class="nav-link" id="cart">
      <img src="assets/imgs/bottomBar/cart-selected.svg" class="selected-icon" alt="cart Selected Icon">
      <img src="assets/imgs/bottomBar/cart.svg" class="unselected-icon" alt="cart Unselected Icon">
      <span>Cart</span>
    </a>
    <a href="shop-wishlist.html" class="nav-link" id="wishlist">
      <img src="assets/imgs/bottomBar/wishlist-selected.svg" class="selected-icon" alt="wishlist Selected Icon">
      <img src="assets/imgs/bottomBar/wishlist.svg" class="unselected-icon" alt="wishlist Unselected Icon">
      <span>Wishlist</span>
    </a>
    <a href="page-account.html" class="nav-link" id="account">
      <img src="assets/imgs/bottomBar/account-selected.svg" class="selected-icon" alt="account Selected Icon">
      <img src="assets/imgs/bottomBar/account.svg" class="unselected-icon" alt="account Unselected Icon">
      <span>Account</span>
    </a>
  </nav>

  <main class="main">
    <div class="section-box">

    </div>
    <section class="section-box shop-template">
      <div class="container">
        <div class="row">
          <div class="col-lg-5">
            <div class="container-images">
              <div class="slider-display-mobile">
                <!--<img src="assets/imgs/page/product/img-gallery-1.jpg" alt="Selected Image">-->
                <!-- Selected image will be populated dynamically -->
              </div>
              <div class="slider-thumbnails">
                <div class="thumbnails-container">
                  <!-- <img src="assets/imgs/page/product/img-gallery-1.jpg" alt="Thumbnail 1" class="slider-image">
                  <img src="assets/imgs/page/product/img-gallery-2.jpg" alt="Thumbnail 2" class="slider-image">
                  <img src="assets/imgs/page/product/img-gallery-3.jpg" alt="Thumbnail 3" class="slider-image">
                  <img src="assets/imgs/page/product/img-gallery-4.jpg" alt="Thumbnail 4" class="slider-image">
                  <img src="assets/imgs/page/product/img-gallery-5.jpg" alt="Thumbnail 5" class="slider-image">
                  <img src="assets/imgs/page/product/img-gallery-6.jpg" alt="Thumbnail 6" class="slider-image">
                  <img src="assets/imgs/page/product/img-gallery-7.jpg" alt="Thumbnail 7" class="slider-image">-->
                  <!-- Thumbnails will be populated dynamically -->
                </div>
              </div>
              <div class="slider-display">
                <!--<img src="assets/imgs/page/product/img-gallery-1.jpg" alt="Selected Image">-->
                <!-- Selected image will be populated dynamically -->
              </div>
            </div>
          </div>
          <div class="col-lg-7">
            <h3 class="color-brand-113 mb-25"><!--product name--></h3>
            <div class="row align-items-center">
              <div class="col-lg-4 col-md-4 col-sm-3 mb-mobile">

              </div>
              <div class="col-lg-8 col-md-8 col-sm-9 text-start text-sm-end"><a class="mr-20" id="wishlistButton"><span
                    class="btn btn-wishlist mr-5 opacity-100 transform-none"></span><span
                    class="font-md color-gray-900">Add to Wish list</span></a></div>
            </div>
            <div class="border-bottom pt-10 mb-20"></div>
            <div class="box-product-price">
              <h3 class="color-brand-131 price-main d-inline-block mr-10 product-discount-price"><!--discounted price-->
              </h3><span class="color-gray-500 price-line font-xl line-througt product-price"><!--price--></span>
            </div>
            <div class="product-description mt-20 color-gray-900">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12">
                  <ul class="list-dot">
                    <li><!--features--></li>
                    <li><!--features--></li>
                    <li><!--features--></li>
                  </ul>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12">
                  <ul class="list-dot">
                    <li><!--features--></li>
                    <li><!--features--></li>
                    <li><!--features--></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="box-product-color mt-20">
              <p class="font-sm color-gray-900">Color: <span class="color-gray-9000 nameColor"></span></p>
              <ul class="list-colors">
                <!-- Color items will be dynamically populated here -->
              </ul>
            </div>

            <div class="box-product-style-size mt-20">
              <div class="row">
                <div class="col-lg-6 col-md-6 mb-20">
                  <p class="font-sm color-gray-900">Style: <span class="color-brand-2 nameStyle"><!--styles--></span>
                  </p>
                  <ul class="list-styles">
                    <!--styles-->
                  </ul>
                </div>
                <div class="col-lg-6 col-md-6 mb-20">
                  <p class="font-sm color-gray-900">Size: <span class="color-brand-2 nameSize"><!--sizes--></span></p>
                  <ul class="list-sizes">
                    <!--sizes-->
                  </ul>
                </div>
              </div>
            </div>
            <div class="buy-product mt-30">
              <p class="font-sm mb-20">Quantity</p>
              <div class="box-quantity">
                <div class="input-quantity">
                  <input class="font-xl color-brand-3" type="text" value="1" readonly><span
                    class="minus-cart"></span><span class="plus-cart"></span></input>
                </div>
                <div class="button-buy"><a class="btn btn-cart" href="">Add to cart</a><a class="btn btn-buy"
                    onclick="redirectToCheckout()">Buy now</a></div>
              </div>
            </div>
            <div class="info-product mt-40">
              <div class="row align-items-end">
                <div class="col-lg-4 col-md-4 mb-20"><span class="font-sm font-medium color-gray-900">SKU: <span
                      class="color-gray-500"><!--Sku text--></span><br>Category: <span
                      class="color-gray-500"><!--Category text--></span><br>Tags: <span
                      class="color-gray-500"><!--tags--></span></span></div>
                <div class="col-lg-4 col-md-4 mb-20"><span class="font-sm font-medium color-gray-900">Free
                    Delivery<br><span class="color-gray-500"><!--Delivery text--></span><br><span
                      class="color-gray-500"></span><!--Delivery text--></span></div>
              </div>
            </div>
          </div>
        </div>
        <div class="border-bottom pt-30"></div>

      </div>
    </section>
    <section class="section-box shop-template">
      <div class="container">
        <div class="pt-30 mb-10">
          <ul class="nav nav-tabs nav-tabs-product" role="tablist">
            <li><a class="active" href="#tab-description" data-bs-toggle="tab" role="tab"
                aria-controls="tab-description" aria-selected="true">Description</a></li>
            <li><a href="#tab-specification" data-bs-toggle="tab" role="tab" aria-controls="tab-specification"
                aria-selected="true">Specification</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade active show" id="tab-description" role="tabpanel"
              aria-labelledby="tab-description">
              <div class="display-text-short">
                <p><!--Description--></p>
              </div>
            </div>
            <div class="tab-pane fade" id="tab-specification" role="tabpanel" aria-labelledby="tab-specification">
              <h5 class="mb-25">Specification</h5>
              <div class="table-responsive">
                <table class="table table-striped">
                  <tr>
                    <td><!--type--></td>
                    <td><!--value--></td>
                  </tr>
                  <tr>
                    <td><!--type--></td>
                    <td><!--type--></td>
                  </tr>
                </table>
              </div>
            </div>
            <div class="border-bottom pt-30 mb-50"></div>
            <h4 class="color-brand-3">Related Products</h4>
            <div class="list-products-5 mt-20" id="productContainer">
              <div id="productsContainer" class="row">
                <!--Related Prodcuts show here-->
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </section>
    <div class="container mt-20">

    </div>
    <section class="section-box mt-90 mb-50">
      <div class="container custon-margin-section-box">
        <ul class="list-col-5">
          <li>
            <div class="item-list">
              <div class="icon-left"><img src="assets/imgs/template/delivery.svg" alt="ibest"></div>
              <div class="info-right">
                <h5 class="font-lg-bold color-gray-100">Free Delivery</h5>
                <p id="delivery-info" class="font-sm color-gray-500">All orders over R 3000</p>
              </div>
            </div>
          </li>
          <li>
            <div class="item-list">
              <div class="icon-left"><img src="assets/imgs/template/support.svg" alt="ibest"></div>
              <div class="info-right">
                <h5 class="font-lg-bold color-gray-100">Support 24/7</h5>
                <p class="font-sm color-gray-500">Shop with an expert</p>
              </div>
            </div>
          </li>
          <li>
            <div class="item-list">
              <div class="icon-left"><img src="assets/imgs/template/voucher.svg" alt="ibest"></div>
              <div class="info-right">
                <h5 class="font-lg-bold color-gray-100">Gift voucher</h5>
                <p class="font-sm color-gray-500">Refer a friend</p>
              </div>
            </div>
          </li>
          <li>
            <div class="item-list">
              <div class="icon-left"><img src="assets/imgs/template/return.svg" alt="ibest"></div>
              <div class="info-right">
                <h5 class="font-lg-bold color-gray-100">Return &amp; Refund</h5>
                <p class="font-sm color-gray-500">For wrong items only</p>
              </div>
            </div>
          </li>
          <li>
            <div class="item-list">
              <div class="icon-left"><img src="assets/imgs/template/secure.svg" alt="ibest"></div>
              <div class="info-right">
                <h5 class="font-lg-bold color-gray-100">Secure payment</h5>
                <p class="font-sm color-gray-500">100% Protected</p>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </section>

    <section class="section-box box-newsletter">
      <div class="container">
        <div class="row">
          <div class="col-lg-5 col-md-7 col-sm-12">
            <h3 class="color-white">Subscrible &amp; Get <span class="color-warning">Offers</span></h3>
            <p class="font-lg color-white">Get E-mail updates about our latest shop and <span
                class="font-lg-bold">special offers.</span></p>
          </div>
          <div class="col-lg-4 col-md-5 col-sm-12">
            <div class="box-form-newsletter mt-15">
              <form class="form-newsletter">
                <input class="input-newsletter font-xs" value="" placeholder="Your email Address">
                <button class="btn btn-brand-2">Sign Up</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Wholesaler confirmation Modal -->
    <div class="modal fade" id="welcomeModal" tabindex="-1" aria-labelledby="welcomeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header" style="border-bottom: none;">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body text-center">
            <h5 class="modal-title" id="welcomeModalLabel">Welcome!</h5>
            <p style="color: #8C9EC5;">Please select your user type:</p>
            <div class="mt-3">
              <button type="button" class="btn btn-primary btn-lg btn-block mb-3" onclick="handleUserClick('customer')"
                style="background-color: #425A8B; color: #ffffff; border-width: 0; width: 72%;">
                <strong style="font-weight: bold;">Customer</strong>
                <p>If you're an individual looking to purchase products for personal use.</p>
              </button>
            </div>

            <div>
              <button type="button" class="btn btn-primary btn-lg btn-block mb-3"
                onclick="handleUserClick('wholesaler')"
                style="background-color: #1F2937; color: #ffffff; border-width: 0; width: 72%;">
                <strong style="font-weight: bold;">Wholesaler</strong>
                <p>If you're a business or entity interested in bulk purchases or wholesale deals.</p>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer bg-footer-homepage5">
    <div class="footer-1">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-3 width-25 mb-30">
            <h4 class="mb-30 color-gray-1000">Contact Us</h4>
            <div class="font-md mb-20 color-gray-900"><strong class="font-md-bold">Address:</strong> 63 Victoria Street
              Durban
            </div>
            <div class="font-md mb-20 color-gray-900"><strong class="font-md-bold">Phone:</strong> 071 954 9488
            </div>
            <div class="font-md mb-20 color-gray-900"><strong class="font-md-bold">E-mail:</strong> custom</div>
            <div class="font-md mb-20 color-gray-900"><strong class="font-md-bold">Hours:</strong> 7:30 - 5:50, Mon -
              Sat</div>
            <div class="mt-30"><a class="icon-socials icon-facebook" href="#"></a><a class="icon-socials icon-instagram"
                href="#"></a><a class="icon-socials icon-twitter" href="#"></a><a class="icon-socials icon-linkedin"
                href="#"></a></div>
          </div>
          <div class="col-lg-3 width-16 mb-30">
            <h4 class="mb-30 color-gray-1000">Company</h4>
            <ul class="menu-footer">
              <li><a href="page-about-us.html">About us</a></li>
              <li><a href="page-404.html">Delivery Information</a></li>
              <li><a href="page-term-condition.html">Terms &amp; Conditions</a></li>
              <li><a href="page-contact.html">Contact us</a></li>
              <li><a href="page-contact.html">Support Center</a></li>
            </ul>
          </div>
          <div class="col-lg-3 width-16 mb-30">
            <h4 class="mb-30 color-gray-1000">My account</h4>
            <ul class="menu-footer">
              <li><a href="page-account.html">Your account</a></li>
              <li><a href="page-contact.html">Return center</a></li>
              <li><a href="page-account.html">Orders</a></li>
              <li><a href="page-account.html">Support Center</a></li>
            </ul>
          </div>
          <div class="col-lg-3 width-23">
            <h4 class="mb-30 color-gray-1000">App &amp; Payment</h4>
            <div>
              <p class="font-md color-gray-900">Download our Apps and get extra 15% Discount on your first Order&mldr;!
              </p>
              <div class="mt-20"><a class="mr-10" href="#"><img src="assets/imgs/template/appstore.png"
                    alt="ibest"></a><a href="#"><img src="assets/imgs/template/google-play.png" alt="ibest"></a></div>
              <p class="font-md color-gray-900 mt-20 mb-10">Secured Payment Gateways</p><img
                src="assets/imgs/template/payment-method.png" alt="ibest">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer-2">
      <div class="footer-bottom-1">
        <div class="container">
          <div class="footer-2-top mb-20"><a href="#"><img alt="ibest" src="assets/imgs/template/logo.svg"></a><a
              class="font-xs color-gray-1000" href="index.html">ibest.com</a><a class="font-xs color-gray-1000"
              href="#">Our
              Partners</a><a class="font-xs color-gray-1000" href="#">Our Bussiness</a></div>
        </div>
      </div>
      <div class="container">
        <div class="footer-bottom mt-20">
          <div class="row">
            <div class="col-lg-6 col-md-12 text-center text-lg-start"><span class="color-gray-900 font-sm">Copyright
                &copy; 2024 ibest. All rights reserved.</span></div>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="assets/js/vendors/modernizr-3.6.0.min.js"></script>
  <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
  <script src="assets/js/vendors/jquery-migrate-3.3.0.min.js"></script>
  <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
  <script src="assets/js/vendors/waypoints.js"></script>
  <script src="assets/js/vendors/wow.js"></script>
  <script src="assets/js/vendors/magnific-popup.js"></script>
  <script src="assets/js/vendors/perfect-scrollbar.min.js"></script>
  <script src="assets/js/vendors/select2.min.js"></script>
  <script src="assets/js/vendors/isotope.js"></script>
  <script src="assets/js/vendors/scrollup.js"></script>
  <script src="assets/js/vendors/swiper-bundle.min.js"></script>
  <script src="assets/js/vendors/noUISlider.js"></script>
  <script src="assets/js/vendors/slider.js"></script>
  <!-- Count down-->
  <script src="assets/js/vendors/counterup.js"></script>
  <script src="assets/js/vendors/jquery.countdown.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Count down-->
  <script src="assets/js/vendors/jquery.elevatezoom.js"></script>
  <script src="assets/js/vendors/slick.js"></script>
  <script src="assets/js/main.js?v=3.0.0"></script>
  <script src="assets/js/shop.js?v=1.2.1"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAKUrhFJiaHhFlqu0w3zKTyhIgXJNIIg68",
      authDomain: "ibest-ba2cf.firebaseapp.com",
      projectId: "ibest-ba2cf",
      storageBucket: "ibest-ba2cf.appspot.com",
      messagingSenderId: "946876798909",
      appId: "1:946876798909:web:b40bc879e556a26cafe4d4",
      measurementId: "G-QYR88B09WG"
    };
    firebase.initializeApp(firebaseConfig);

    var firestore = firebase.firestore();
    var auth = firebase.auth();
    var db = firebase.firestore();

    // Function to parse URL parameters
    function getUrlParams() {
      const params = {};
      const queryString = window.location.search.substring(1);
      const urlParams = new URLSearchParams(queryString);
      for (const [key, value] of urlParams) {
        params[key] = value;
      }
      return params;
    }

    // Get the parameter values from the URL
    const urlParams = getUrlParams();
    const category = urlParams['category'];
    const product = urlParams['product'];
    const productId = urlParams['productId']
    var userData = [];
    var isFetchProduct = false;

    // Display the parameter values
    if (category && product && productId) {
      console.log('Selected Category:', category);
      console.log('Selected Product:', product);
      console.log('Product ID:', productId);
    } else {
      console.log('No category or product specified.');
    }

    function renderProductData() {

      // Fetch the product details from Firestore
      firestore.collection("products").doc(category).collection(product).doc(productId).get()
        .then(function (doc) {
          if (doc.exists) {
            var productData = doc.data();
            console.log("Product Data: ", productData);
            populateProductDetails(productData);
          } else {
            console.log("No such document!");
          }
        })
        .catch(function (error) {
          console.error("Error getting product document:", error);
        });
    }



    // Function to populate HTML elements with product data
    function populateProductDetails(productData) {

      var featureImageUrl = productData.featureImageUrl;
      var productImages = productData.productImages;

      // Create a new array with the variable and image URLs
      var imagesArray = [featureImageUrl, ...productImages];

      /*var imagesArray = [
        "assets/imgs/page/product/img-gallery-1.jpg",
        "assets/imgs/page/product/img-gallery-2.jpg",
        "assets/imgs/page/product/img-gallery-3.jpg",
        "assets/imgs/page/product/img-gallery-4.jpg",
        "assets/imgs/page/product/img-gallery-5.jpg",
        "assets/imgs/page/product/img-gallery-6.jpg",
        "assets/imgs/page/product/img-gallery-7.jpg"
      ];*/

      var thumbnailsContainer = document.querySelector(".thumbnails-container");
      var sliderDisplay = document.querySelector(".slider-display");
      var sliderDisplayMobile = document.querySelector(".slider-display-mobile");

      // Clear previous content
      thumbnailsContainer.innerHTML = "";

      // Populate thumbnails
      imagesArray.forEach(function (imageUrl) {
        var img = document.createElement("img");
        img.src = imageUrl;
        img.alt = "Thumbnail";
        img.className = "slider-image";
        thumbnailsContainer.appendChild(img);
      });

      sliderDisplay.innerHTML = "";
      sliderDisplayMobile.innerHTML="";

      var selectedImg = document.createElement("img");
      selectedImg.src = imagesArray[0];
      selectedImg.alt = "Selected Image";
      sliderDisplay.appendChild(selectedImg);

      var selectedImgMobile = document.createElement("img");
      selectedImgMobile.src = imagesArray[0];
      selectedImgMobile.alt = "Selected Image";
      sliderDisplayMobile.appendChild(selectedImgMobile);

      document.querySelectorAll('.thumbnails-container img').forEach(function (thumbnail) {
        thumbnail.addEventListener('click', function () {
          var src = thumbnail.getAttribute('src');
          document.querySelector('.slider-display img').setAttribute('src', src);
          document.querySelector('.slider-display-mobile img').setAttribute('src', src);
        });
      });




      /*var featureImageUrl = productData.featureImageUrl;
      var productImages = productData.productImages;

      // Create a new array with the variable and image URLs
      var imageUrls = [featureImageUrl, ...productImages];

      /* Array of image URLs
      var imageUrls = [
        'assets/imgs/page/product/img-gallery-1.jpg',
        'assets/imgs/page/product/img-gallery-2.jpg',
        'assets/imgs/page/product/img-gallery-3.jpg',
        'assets/imgs/page/product/img-gallery-4.jpg',
        'assets/imgs/page/product/img-gallery-5.jpg',
        'assets/imgs/page/product/img-gallery-6.jpg'
        // Add more image URLs as needed
      ];

      // Get the container elements
      var productSlider = document.getElementById('product-slider');
      var thumbnailSlider = document.getElementById('thumbnail-slider');

      // Add margin to thumbnail slider
      thumbnailSlider.style.marginTop = '10px';

      // Function to remove the "selected" class from all thumbnail images
      function removeSelectedClass() {
        var thumbnailImages = document.querySelectorAll('.thumbnail-img');
        thumbnailImages.forEach(function (img) {
          img.classList.remove('selected');
          img.style.border = '1px solid #DDE4F0'; // Reset border color to gray for all thumbnail images
        });
      }

      // Loop through the image URLs and create img elements
      imageUrls.forEach(function (url, index) {
        // Create img element for product slider
        var feagureProduct = document.createElement('figure');
        var productImg = document.createElement('img');
        productImg.src = url;
        productImg.alt = 'product image';
        productImg.className = 'border-radius-10';
        feagureProduct.appendChild(productImg);
        productSlider.appendChild(feagureProduct);

        // Create img element for thumbnail slider
        var thumbnailImg = document.createElement('img');
        thumbnailImg.src = url;
        thumbnailImg.alt = 'product image';
        thumbnailImg.className = 'border-radius-10 thumbnail-img item-thumb';
        thumbnailSlider.appendChild(thumbnailImg);

        // Add click event listener to thumbnail images to change main product image
        thumbnailImg.addEventListener('click', function () {
          productSlider.innerHTML = ''; // Clear existing images
          var clickedImg = document.createElement('img');
          clickedImg.src = url;
          clickedImg.alt = 'product image';
          clickedImg.className = 'border-radius-10';
          productSlider.appendChild(clickedImg);

          // Remove "selected" class from all thumbnail images and reset border color
          removeSelectedClass();
          // Add "selected" class to the clicked thumbnail image and change border color to blue
          thumbnailImg.classList.add('selected');
          thumbnailImg.style.border = '1px solid #BF141F';
        });
      });

      // Select the first thumbnail image when the page loads
      var firstThumbnailImg = document.querySelector('.thumbnail-img');
      if (firstThumbnailImg) {
        firstThumbnailImg.click(); // Trigger a click event on the first thumbnail image
      }*/

      // Update product name
      document.querySelector('.color-brand-113').textContent = productData.product;

      let discountedPrice = productData.price * (productData.discount / 100);
      let newPrice = productData.price - discountedPrice;

      document.querySelector('.product-price').textContent = 'R' + productData.price;

      document.querySelector('.product-discount-price').textContent = ' R' + Math.floor(newPrice);

      const featureLists = document.querySelectorAll('.product-description .list-dot');

      // Clear existing content
      featureLists.forEach(list => list.innerHTML = '');

      const maxFeaturesPerColumn = Math.ceil(productData.features.length / 2); // Calculate max features per column

      // Populate feature lists
      for (let i = 0; i < productData.features.length; i++) {
        const featureListIndex = Math.floor(i / maxFeaturesPerColumn); // Calculate the index of the feature list
        const listItem = document.createElement('li');
        listItem.textContent = productData.features[i];
        featureLists[featureListIndex].appendChild(listItem);
      }


      const colorList = document.querySelector('.list-colors');
      const nameColor = document.querySelector('.nameColor');

      // Clear existing content
      colorList.innerHTML = '';

      // Populate color items
      productData.colors.forEach((color, index) => {
        const colorItem = document.createElement('li');
        const imageUrl = color.imageUrl; // Get the first imageUrl in the array

        const image = document.createElement('img');
        image.src = imageUrl;
        image.alt = color.color;
        image.title = color.color;
        image.classList.add('color-image');

        // Add 'active' class to the first image element
        if (index === 0) {
          image.classList.add('active');
          nameColor.textContent = color.color; // Set initial color name
        }

        colorItem.appendChild(image);
        colorItem.dataset.color = color.color;
        colorList.appendChild(colorItem);
      });

      // Add event listener to handle color selection
      colorList.addEventListener('click', function (event) {
        const clickedImage = event.target;
        if (clickedImage.classList.contains('color-image')) {
          const selectedColor = clickedImage.title;
          nameColor.textContent = selectedColor;
          // Remove 'active' class from all images
          colorList.querySelectorAll('.color-image').forEach(image => {
            image.classList.remove('active');
          });
          // Add 'active' class to clicked image
          clickedImage.classList.add('active');
        }
      });

      const styleList = document.querySelector('.list-styles');
      const nameStyle = document.querySelector('.nameStyle');

      // Clear existing content
      styleList.innerHTML = '';

      // Populate style items
      productData.styles.forEach((style, index) => {
        const styleItem = document.createElement('li');
        styleItem.textContent = style;
        styleItem.title = style;
        if (index === 0) {
          styleItem.classList.add('active');
          nameStyle.textContent = style;
        }
        styleList.appendChild(styleItem);
      });

      // Add event listener to handle style selection
      styleList.addEventListener('click', function (event) {
        const clickedStyle = event.target;
        if (clickedStyle.tagName === 'LI') {
          const selectedStyle = clickedStyle.textContent;
          nameStyle.textContent = selectedStyle;
          // Remove 'active' class from all style items
          styleList.querySelectorAll('li').forEach(item => {
            item.classList.remove('active');
          });
          // Add 'active' class to clicked style item
          clickedStyle.classList.add('active');
        }
      });

      const sizeList = document.querySelector('.list-sizes');
      const nameSize = document.querySelector('.nameSize');

      // Clear existing content
      sizeList.innerHTML = '';

      // Populate size items
      productData.sizes.forEach((size, index) => {
        const sizeItem = document.createElement('li');
        sizeItem.textContent = size;
        sizeItem.title = size;
        if (index === 0) {
          sizeItem.classList.add('active');
          nameSize.textContent = size;
        }
        sizeList.appendChild(sizeItem);
      });

      // Add event listener to handle size selection
      sizeList.addEventListener('click', function (event) {
        const clickedSize = event.target;
        if (clickedSize.tagName === 'LI') {
          const selectedSize = clickedSize.textContent;
          nameSize.textContent = selectedSize;
          // Remove 'active' class from all size items
          sizeList.querySelectorAll('li').forEach(item => {
            item.classList.remove('active');
          });
          // Add 'active' class to clicked size item
          clickedSize.classList.add('active');
        }
      });

      const skuElement = document.querySelector('.info-product .col-lg-4:nth-child(1) .color-gray-500');
      skuElement.textContent = productData.sku;

      const categoryElement = document.querySelector('.info-product .col-lg-4:nth-child(1) .color-gray-500:nth-of-type(2)');
      categoryElement.textContent = productData.selectedCategory;

      const tagsElement = document.querySelector('.info-product .col-lg-4:nth-child(1) .color-gray-500:nth-of-type(3)');
      tagsElement.textContent = productData.tags.join(', ');

      const deliveryInfoElement = document.querySelector('.info-product .col-lg-4:nth-child(2) .color-gray-500:nth-of-type(1)');
      deliveryInfoElement.textContent = productData.deliveryInfo;

      const descriptionElement = document.querySelector('.tab-pane.fade.active.show .display-text-short p');
      descriptionElement.textContent = productData.description;


      const tableBody = document.querySelector('.tab-pane.fade#tab-specification .table tbody');
      tableBody.innerHTML = ''; // Clear existing content

      for (let i = 0; i < productData.type.length; i++) {
        const row = document.createElement('tr');
        const typeCell = document.createElement('td');
        const valueCell = document.createElement('td');

        typeCell.textContent = productData.type[i];
        valueCell.textContent = productData.value[i];

        row.appendChild(typeCell);
        row.appendChild(valueCell);
        tableBody.appendChild(row);
      }

    }

    function populateWishlistIcon(userData) {
      // Get the button element
      var wishlistButton = document.getElementById('wishlistButton');
      var wishlistSVG;

      var wishlistButton = document.getElementById('wishlistButton');

      console.log("USerData:", userData.wishlist)

      if (userData.wishlist) {
        var isProductInWishlist = userData.wishlist.some(item => item.productId === productId);
        if (isProductInWishlist) {
          wishlistButton.classList.add('product-in-wishlist');
          console.log("Added to wishlist");
        } else {
          wishlistButton.classList.remove('product-in-wishlist');
          console.log("Not added to wishlist");
        }
      } else {
        console.log("User does not have a wishlist");
      }
    }


    function fetchProducts() {
      isFetchProduct = true;
      var selectedCategory = category;

      var collectionRef = firestore.collection("products").doc(selectedCategory).collection("All");

      collectionRef.where(firebase.firestore.FieldPath.documentId(), '!=', productId).limit(10).get().then(function (querySnapshot) {
        var productsContainer = document.getElementById("productsContainer");
        var productCount = 0;
        var isFirstSetOfProductsDisplayed = false;

        querySnapshot.forEach(function (doc) {
          if (productCount >= 10) {

            // Exit the loop after displaying 5 products
            return;
          }
          var data = doc.data();
          let discountedPrice = data.price * (data.discount / 100);
          let newPrice = data.price - discountedPrice;
          if (userData.wishlist) {
            var isProductInWishlist = userData.wishlist.some(item => item.productId === doc.id);
            var wishlistSVG = isProductInWishlist ? "btn-wishlistIconRed" : "btn-wishlistIcon";
          } else {
            var wishlistSVG = "btn-wishlistIcon";
          }

          var productHtml = `
                <div class="card-grid-style-3">
                    <div class="card-grid-inner">
                      <div class="tools"><a class="btn btn-wishlist ${wishlistSVG} btn-tooltip mb-10"
                        href="#" aria-label="Add To Wishlist" data-product-id="${doc.id}" data-category="${data.selectedCategory}" data-subcategory="${data.selectedSubCategorie}"></a></div>
                        <div class="image-box">
                            <span class="label bg-brand-2">-${data.discount}%</span>
                            <a href="shop-single-product.html?category=${data.selectedCategory}&product=${data.selectedSubCategorie}&productId=${doc.id}"><img src="${data.featureImageUrl}" alt="${data.product}"></a>
                        </div>
                        <div class="info-right">
                            <a class="font-xs color-gray-500">${data.selectedCategory}</a><br>
                            <a class="color-brand-3 font-sm-bold" href="shop-single-product.html?category=${data.selectedCategory}&product=${data.selectedSubCategorie}&productId=${doc.id}">${data.product}</a>
                            <div class="price-info">
                                <strong class="font-lg-bold color-brand-3 price-main">${Math.floor(newPrice)} R</strong>
                                <span class="color-gray-500 price-line">${data.price} R</span>
                            </div>
                            <div class="mt-20 box-btn-cart">
                              <a class="btn btn-cart" href="shop-single-product.html?category=${data.selectedCategory}&product=${data.selectedSubCategorie}&productId=${doc.id}">View Details</a>
                            </div>
                            <ul class="list-features">
                              <li>${data.features[0]}</li>
                              <li>${data.features[1]}</li>
                              <li>${data.features[2]}</li>
                            </ul>
                        </div>
                    </div>
                </div>`;

          // Append the product HTML to the container
          productsContainer.innerHTML += productHtml;
          productCount++;

          if (productCount === 5 && !isFirstSetOfProductsDisplayed) {
            isFirstSetOfProductsDisplayed = true;
            // Add separator and heading after the first 5 products
            productsContainer.innerHTML += `
                    <div class="border-bottom pt-20 mb-40"></div>
                    <h4 class="color-brand-3">You may also like</h4>
                `;
          }
        });

        // Attach event listener to the "Add to Wishlist" buttons
        attachWishlistEventListeners();

      }).catch(function (error) {
        console.log("Error getting documents: ", error);
      });
    }

    // Function to add a product to the wishlist
    function addToWishlist(category, subcategory, productId, button) {
      var user = firebase.auth().currentUser;

      if (user) {
        var userId = user.uid;
        console.log("USER ID:", userId);
        var userDocRef = firestore.collection("users").doc(user.uid);

        // Update the wishlist array in the user's document
        userDocRef.get().then(function (doc) {
          if (doc.exists) {
            var wishlist = doc.data().wishlist || [];

            if (wishlist.some(item => item.productId === productId)) {
              // Product is already in the wishlist, remove it
              userDocRef.update({
                wishlist: firebase.firestore.FieldValue.arrayRemove({
                  productId: productId,
                  category: category,
                  product: subcategory
                })
              })
                .then(function () {
                  console.log("Product removed from wishlist:", productId);
                  button.classList.remove('btn-wishlistIconRed');
                  button.classList.add('btn-wishlistIcon');
                  //alert("Product removed from wishlist.");
                  showAlert("Product removed from Wishlist.")
                  fetchUserData();
                })
                .catch(function (error) {
                  console.error("Error removing product from wishlist: ", error);
                });
            } else {
              // Product is not in the wishlist, add it
              userDocRef.update({
                wishlist: firebase.firestore.FieldValue.arrayUnion({
                  productId: productId,
                  category: category,
                  product: subcategory
                })
              })
                .then(function () {
                  console.log("Product added to wishlist:", productId);
                  button.classList.add('btn-wishlistIconRed');
                  button.classList.add('btn-wishlistIcon');
                  //alert("Product added to wishlist.");
                  showAlert("Product added to Wishlist");
                  fetchUserData();
                })
                .catch(function (error) {
                  console.error("Error adding product to wishlist: ", error);
                });
            }
          } else {
            console.log("User document not found.");
          }
        }).catch(function (error) {
          console.error("Error getting user document:", error);
        });
      } else {
        // No user is signed in
        console.log("No user is signed in.");
      }
    }

    function redirectToCheckout() {
      if (checkUserLoggedIn()) {
        var productSpecs = {};

        // Get the active color and its label
        var activeColorElement = document.querySelector('.box-product-color .nameColor');
        var selectedColor = activeColorElement.textContent.trim();
        productSpecs.color = selectedColor;

        // Get the active style and its label
        var activeStyleElement = document.querySelector('.col-lg-6 .nameStyle');
        var selectedStyle = activeStyleElement.textContent.trim();
        productSpecs.style = selectedStyle;

        // Get the active size and its label
        var activeSizeElement = document.querySelector('.col-lg-6 .nameSize');
        var selectedSize = activeSizeElement.textContent.trim();
        productSpecs.size = selectedSize;

        // Get the input quantity and its label
        var quantityInput = document.querySelector('.input-quantity input');
        var selectedQuantity = quantityInput.value;
        productSpecs.quantity = selectedQuantity;

        var uniqueId = generateUniqueId();

        var productDetail = {
          productSpecs: productSpecs,
          category: category,
          product: product,
          productId: productId,
          uniqueId: uniqueId
        };

        var productsDetails = [];
        productsDetails.push(productDetail);


        var pageUrl = "shop-checkout.html?productsDetails=" + encodeURIComponent(JSON.stringify(productsDetails));
        window.location.href = pageUrl;
      }
      else {
        var welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
        welcomeModal.show();
      }
    }

    // Function to add a product to the cart
    function addToCart(category, product, productId, selected) {
      return new Promise((resolve, reject) => {
        var user = firebase.auth().currentUser;

        // Create an object with the specified properties
        var productSpecs = {
          color: selected.color,
          size: selected.size,
          style: selected.style,
          quantity: selected.quantity
        };

        var uniqueId = generateUniqueId();

        if (user) {
          var userDocRef = firestore.collection("users").doc(user.uid);

          // Check if the product is already in the cart
          userDocRef.get().then(function (doc) {
            if (doc.exists) {
              var cart = doc.data().cart || [];

              if (cart.some(item =>
                item.productId === productId &&
                item.productSpecs.color === productSpecs.color &&
                item.productSpecs.size === productSpecs.size &&
                item.productSpecs.style === productSpecs.style &&
                item.productSpecs.quantity === productSpecs.quantity
              )) {
                resolve();
              } else {
                // Add productId to the user's cart
                userDocRef.update({
                  cart: firebase.firestore.FieldValue.arrayUnion({
                    category: category,
                    product: product,
                    productId: productId,
                    uniqueId: uniqueId,
                    productSpecs: productSpecs
                  })
                })
                  .then(function () {
                    console.log("Product added to cart:", productId);
                    resolve();
                  })
                  .catch(function (error) {
                    console.error("Error adding product to cart: ", error);
                    reject(error);
                  });
              }

            }
          }).catch(function (error) {
            console.error("Error getting user document:", error);
            reject(error);
          });
        } else {
          // No user is signed in
          console.log("No user is signed in.");
          resolve();
        }
      })
    }

    function generateUniqueId() {
      // Generate a random number and append it to the current timestamp
      return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
    }

    // Function to attach event listeners to the "Add to Wishlist" buttons
    function attachWishlistEventListeners() {
      var wishlistButtons = document.querySelectorAll('.btn-wishlist');
      wishlistButtons.forEach(function (button) {
        button.addEventListener('click', function (event) {
          event.preventDefault();

          // Check if the user is logged in
          if (checkUserLoggedIn()) {
            var productID = button.getAttribute('data-product-id');
            var Category = button.getAttribute('data-category');
            var subcategory = button.getAttribute('data-subcategory');

            if (productID && Category && subcategory) {
              addToWishlist(Category, subcategory, productID, button);
            } else {
              addToWishlist(category, product, productId, button);
            }

          } else {
            var welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
            welcomeModal.show();
          }
        });
      });
    }

    // Function to attach event listeners to the "Add to Cart" buttons
    function attachCartEventListeners() {
      var cartButtons = document.querySelectorAll('.btn-cart');
      cartButtons.forEach(function (button) {
        button.addEventListener('click', function (event) {
          event.preventDefault();

          var productSpecs = [];

          // Get the active color and its label
          var activeColorElement = document.querySelector('.box-product-color .nameColor');
          var selectedColor = activeColorElement.textContent.trim();
          productSpecs.color = selectedColor;

          // Get the active style and its label
          var activeStyleElement = document.querySelector('.col-lg-6 .nameStyle');
          var selectedStyle = activeStyleElement.textContent.trim();
          productSpecs.style = selectedStyle;

          // Get the active size and its label
          var activeSizeElement = document.querySelector('.col-lg-6 .nameSize');
          var selectedSize = activeSizeElement.textContent.trim();
          productSpecs.size = selectedSize;

          // Get the input quantity and its label
          var quantityInput = document.querySelector('.input-quantity input');
          var selectedQuantity = quantityInput.value;
          productSpecs.quantity = selectedQuantity;

          // Display the product specifications array
          console.log("Product Specifications:", productSpecs);

          // Check if the user is logged in
          if (checkUserLoggedIn()) {
            addToCart(category, product, productId, productSpecs)
              .then(() => {
                showCartAlert("Product add to Cart");
              })
              .catch(error => {
                console.error("Error adding items from cart:", error);
              });
          } else {
            var welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
            welcomeModal.show();
          }
        });
      });
    }

    attachCartEventListeners();


    // Function to update the wishlist count
    function updateWishlistCount() {
      var wishlistCountElement = document.getElementById('wishlistCount');
      if (wishlistCountElement) {
        wishlistCountElement.textContent = userData.wishlist ? userData.wishlist.length : 0;
      }

      var wishlistCountMobileElement = document.getElementById('wishlistCountMobile');
      if (wishlistCountMobileElement) {
        wishlistCountMobileElement.textContent = userData.wishlist ? userData.wishlist.length : 0;
      }
    }

    // Function to update the cart count
    function updateCartCount() {
      var cartCountElement = document.getElementById('cartCount');
      if (cartCountElement) {
        cartCountElement.textContent = userData.cart ? userData.cart.length : 0;
      }

      var cartCountMobileElement = document.getElementById('cartCountMobile');
      if (cartCountMobileElement) {
        cartCountMobileElement.textContent = userData.cart ? userData.cart.length : 0;
      }
    }

    document.getElementById('accountIcon').addEventListener('click', function () {
      document.querySelector('.dropdown-account').classList.toggle('show');
    });

    document.getElementById('wishlistIcon').addEventListener('click', function () {
      window.location.href = 'shop-wishlist.html';
    });

    document.getElementById('cartIcon').addEventListener('click', function () {
      window.location.href = 'shop-cart.html';
    });

    function handleUserClick(userChoise) {
      $('#welcomeModal').modal('hide');

      if (userChoise === 'customer') {
        window.location.href = 'page-login.html';
      } else {
        window.location.href = 'page-wholesaler-register.html';
      }
    }

    // Function to check if a user is logged in
    function checkUserLoggedIn() {
      var user = firebase.auth().currentUser;
      if (user) {
        console.log("user logged in");
        return true;
      } else {
        console.log("user is not logged in");
        return false;
      }
    }

    // Function to sign out the user
    function updateSignInOrOut() {
      var signinLink = document.getElementById("signinLink");
      var signinLinkMobile = document.getElementById("signinLinkMobile");

      if (checkUserLoggedIn()) {
        signinLink.querySelector("a").textContent = "Sign out";
        signinLinkMobile.querySelector("a").textContent = "Sign out";
      } else {
        signinLink.querySelector("a").textContent = "Sign in";
        signinLinkMobile.querySelector("a").textContent = "Sign in";
      }

    }

    // Function to sign out the user
    function signOutUser() {
      firebase.auth().signOut().then(function () {
        console.log('User signed out successfully');
        window.location.href = 'index.html';
      }).catch(function (error) {
        console.error('Error signing out:', error);
      });
    }

    function signInOrOut() {
      if (checkUserLoggedIn()) {
        signOutUser();
      } else {
        var welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
        welcomeModal.show();
      }
    }

    // Function to fetch user data when the authentication state changes
    function onAuthStateChanged(user) {
      updateSignInOrOut();
      if (user) {
        fetchUserData(); // Fetch user data if a user is signed in
      } else {
        console.log("No user is signed in.");
        updateBanner(true);
        fetchProducts();
        renderProductData();
      }
    }

    // Add a listener for authentication state changes
    firebase.auth().onAuthStateChanged(onAuthStateChanged);

    function fetchUserData() {
      var user = firebase.auth().currentUser;

      if (user) {
        var userId = user.uid;
        var userDocRef = firestore.collection("users").doc(userId);

        userDocRef.get().then(function (doc) {
          if (doc.exists) {
            // User document found, access user data
            userData = doc.data();
            updateBanner(userData.wholesaleBuyer ? false : true);
            updateWishlistCount();
            updateCartCount();
            populateWishlistIcon(userData);
            //renderCartItems();

            if (!isFetchProduct) {
              fetchProducts();
            }
          } else {
            // User document not found
            console.log("No user data found for current user.");
          }
        }).catch(function (error) {
          console.error("Error getting user document:", error);
        });
      } else {
        // No user is signed in
        console.log("No user is signed in.");
      }
    }

    function updateBanner(userType) {
      var bannerRef = db.collection("banner").doc("info");
      bannerRef.get().then(function (doc) {
        if (doc.exists) {
          var data = doc.data();

          if (userType) {
            var deliveryInfoParagraph = document.getElementById('delivery-info');
            deliveryInfoParagraph.textContent = 'All orders over R ' + data.amount;

            var infoTopbar1 = document.getElementById('infoTopbar1');
            infoTopbar1.textContent = 'Free Shipping for all Orders over';

            var infoTopbar2 = document.getElementById('infoTopbar2');
            infoTopbar2.textContent = ' R ' + data.amount;
          }
          else {
            var deliveryInfoParagraph = document.getElementById('delivery-info');
            deliveryInfoParagraph.textContent = 'On all orders';

            var infoTopbar1 = document.getElementById('infoTopbar1');
            infoTopbar1.textContent = 'Free Shipping on all Orders';
          }

        } else {
          console.log("No such document exists.");
        }
      }).catch(function (error) {
        console.error("Error fetching document:", error);
      });
    }

    document.addEventListener('DOMContentLoaded', function () {
      // Your code here
      renderProductData();
    });

    function showAlert(text) {
      Swal.fire({
        title: text,
        showClass: {
          popup: `
            animate__animated
            animate__fadeInUp
            animate__faster
          `
        },
        hideClass: {
          popup: `
            animate__animated
            animate__fadeOutDown
            animate__faster
          `
        },
        confirmButtonColor: '#BF141F',
        customClass: {
          title: 'alertClass',
          popup: 'alertClassPopup'
        }
      });
    }

    function showCartAlert(text) {
      Swal.fire({
        title: text,
        showClass: {
          popup: `
            animate__animated
            animate__fadeInUp
            animate__faster
          `
        },
        hideClass: {
          popup: `
            animate__animated
            animate__fadeOutDown
            animate__faster
          `
        },
        confirmButtonColor: '#BF141F',
        customClass: {
          title: 'alertClass',
          popup: 'alertClassPopup'
        }
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = "shop-cart.html";
        }
      });
    }



    // Function to read all documents from the 'categories' collection and populate the Shop by Categories
    function popuateShopByCategories() {
      var menu = document.querySelector('.menu-close');
      var selectElement = document.querySelector('.select-active');

      firestore.collection("categories").get()
        .then((querySnapshot) => {
          querySnapshot.forEach((doc) => {
            // Access the data of each document
            var data = doc.data();
            var category = doc.id;
            var subCategories = data.subCategories || [];
            var imageUrl = data.imageURL;

            // Create parent list item for category
            var parentListItem = document.createElement('li');
            parentListItem.classList.add('has-children');

            // Create link for category
            var categoryLink = document.createElement('a');
            categoryLink.href = "javascript:;";

            // Create image element for category
            var imgLink = document.createElement('span');
            imgLink.classList.add('img-link');
            var img = document.createElement('img');
            img.src = imageUrl;
            img.alt = category;
            imgLink.appendChild(img);

            // Create span element for category text
            var textLink = document.createElement('span');
            textLink.classList.add('text-link');
            textLink.textContent = category;

            categoryLink.appendChild(imgLink);
            categoryLink.appendChild(textLink);

            // Add event listener for category click
            categoryLink.addEventListener('click', function () {
              const destinationUrl = 'shop-grid.html?category=' + encodeURIComponent(category) + '&product=' + encodeURIComponent('All');
              window.location.href = destinationUrl;
            });

            // Create unordered list for sub-categories
            var subMenu = document.createElement('ul');
            subMenu.classList.add('sub-menu');

            // Populate sub-categories
            subCategories.forEach(subCategory => {
              var subCategoryItem = document.createElement('li');
              var subCategoryLink = document.createElement('a');
              subCategoryLink.href = "#";
              subCategoryLink.classList.add('product-link');
              subCategoryLink.textContent = subCategory;

              // Add event listener for sub-category click
              subCategoryLink.addEventListener('click', function () {
                const destinationUrl = 'shop-grid.html?category=' + encodeURIComponent(category) + '&product=' + encodeURIComponent(subCategory);
                window.location.href = destinationUrl;
              });

              subCategoryItem.appendChild(subCategoryLink);
              subMenu.appendChild(subCategoryItem);
            });


            // Create an option element for the category
            var option = document.createElement('option');
            option.value = category;
            option.textContent = category;

            // Add event listener for select change
            selectElement.addEventListener('change', function () {
              var selectedCategory = selectElement.value;
              console.log('Selected Category:', selectedCategory);
            });

            // Append the option to the select element
            selectElement.appendChild(option)

            // Append category link and sub-menu to parent list item
            parentListItem.appendChild(categoryLink);
            parentListItem.appendChild(subMenu);

            // Append parent list item to menu
            menu.appendChild(parentListItem);
          });
        })
        .catch((error) => {
          console.error("Error reading documents: ", error);
        });
    }

    // Select the input element
    var inputElement = document.querySelector('.box-keysearch input');

    // Add event listener for keydown event
    inputElement.addEventListener('keydown', function (event) {
      // Check if the pressed key is Enter
      if (event.key === 'Enter') {
        // Log the input value to the console
        console.log('Search query:', inputElement.value);
        const destinationUrl = 'shop-grid.html?category=' + encodeURIComponent('All') + '&product=' + encodeURIComponent('All') + '&searchQuery=' + encodeURIComponent(inputElement.value);
        window.location.href = destinationUrl;
      }
    });

    document.getElementById("searchInput").addEventListener("keydown", function (event) {
      if (event.keyCode === 13) {
        var inputValue = this.value;
        const destinationUrl = 'shop-grid.html?category=' + encodeURIComponent('All') + '&product=' + encodeURIComponent('All') + '&searchQuery=' + encodeURIComponent(inputValue);
        window.location.href = destinationUrl;
      }
    });

    popuateShopByCategories();

    // JavaScript to handle toggling active class on navigation links
    document.querySelectorAll('.nav-link').forEach(function (navLink) {
      navLink.addEventListener('click', function () {
        document.querySelectorAll('.nav-link').forEach(function (link) {
          link.classList.remove('active');
        });
        navLink.classList.add('active');
      });
    });

  </script>
</body>

</html>